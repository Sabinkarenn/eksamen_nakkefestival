---
import Heading from "../components/Heading.astro";
/**
 * Billettyperne er defineret her som et array af objekter.
 * Hver billet har et id, navn, evt. dato og pris.
 */
 const tickets = [
  { id: 'Bus KBH-Nakke 23/7', name: 'Bus KBH-Nakke 23/7', date: 'Afgang kl. 12 fra DGI byen ' },
  { id: 'Bus Nakke-KBH 26/7', name: 'Bus Nakke-KBH 26/7', date: 'Afgang kl. 14',  },
  
];
---

<!-- Ydre container for hele billettilvalg-komponenten -->
<div class=" bg-pink mb-15 max-w-md mx-auto p-4 border-2 border-darkblue rounded-lg ">

  <!-- Overskrift og info-tekst -->
    <Heading htmlheading="h2" size="medium" stylingclasses="text-start mb-1">Pssst... tilkøb busbillet her</Heading>

  <p class=" text-start mb-7">
    170 kr. pr billet
  </p>

  <!-- Vi looper igennem hver billet og viser dem én for én -->
  {tickets.map(ticket => (
    <div class="border-t-2 border-darkblue py-3 text-start flex items-center justify-between" id={ticket.id}>

      <!-- Venstre side: navn, dato og pris -->
      <div>
        <p class="font-bold  leading-tight">{ticket.name}</p>
        {ticket.date && <p class=" ">{ticket.date}</p>}
      </div>

      <div class="flex items-center gap-2">
        <!-- Minus-knap -->
        <button 
          class="text-darkblue text-4xl font-bold"
          onClick={`decrement('${ticket.id}')`}
        >−</button>

        <!-- Visning af nuværende antal -->
        <span id={`count-${ticket.id}`} class="w-4 bg-yellow w-8 h-8 rounded-full  text-darkblue  text-center">0</span>

        <!-- Plus-knap -->
        <button 
          class="text-4xl text-text-startfont-bold"
          onClick={`increment('${ticket.id}')`}
        >+</button>
      </div>

      
    </div>

      
    </div>
  ))}

 

<!-- Inline JavaScript til at håndtere tællerne -->
<script type="module" is:inline>
  // Objekt til at holde styr på antallet af billetter pr. type
  const counts = {};

  // Opdaterer visningen af antallet for en bestemt billettype
  function updateDisplay(id) {
    document.getElementById(`count-${id}`).textContent = counts[id] || 0;
  }

  // Funktion til at tælle op
  window.increment = (id) => {
    counts[id] = (counts[id] || 0) + 1;
    updateDisplay(id);
  }

  // Funktion til at tælle ned (men ikke under 0)
  window.decrement = (id) => {
    if (counts[id] > 0) counts[id] -= 1;
    updateDisplay(id);
  }
</script>
