---
import MainLayout from "../layouts/MainLayout.astro";
import Kunstnercard from "../components/Kunstnercard.astro";
import Filtrering from "../components/Filtrering.astro";
import Skema from "../components/Skema.astro";

// Din skema-data
const skemaer = {
    "23 juli": {
        "10": { scene1: "JOSIE AMADONNA" },
        "12": { scene2: "BECCA" },
        "14": { scene1: "UMA KABONGO" },
        "16": { scene2: "ADLYD" },
        "18": { scene1: "ADAM" },
        "21": { scene2: "YASMIN" },
        "00": { scene1: "INDUKTRI" },
        "01": { scene2: "TANAJAH" },
    },
    "24 juli": {
        "10": { scene2: "ADLYD" },
        "12": { scene2: "YASMIN" },
        "14": { scene1: "JOSIE AMADONNA" },
        "16": { scene2: "BECCA" },
        "18": { scene2: "TANAJAH" },
        "21": { scene1: "ADAM" },
        "00": { scene1: "UMA KABONGO" },
        "01": { scene1: "INDUKTRI" },
    },
    "25 juli": {
        "10": { scene1: "ADAM" },
        "12": { scene2: "TANAJAH" },
        "14": { scene1: "INDUKTRI" },
        "16": { scene2: "BECCA" },
        "18": { scene1: "UMA KABONGO" },
        "21": { scene1: "JOSIE AMADONNA" },
        "00": { scene2: "ADLYD" },
        "01": { scene2: "YASMIN" },
    },
    "26 juli": {
        "10": { scene1: "BECCA" },
        "12": { scene2: "ADLYD" },
    },
};
---

<MainLayout>
    <div class="flex flex-col gap-20 p-4">
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="Josie Amadonna"
            cardtitle="JOSIE AMADONNA"
            cardscene="DEN ENE SCENE"
            cardkategori="RAP"
            carddato="23. juli"
            cardtidspunkt="10:00"
        />
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="becca"
            cardtitle="BECCA"
            cardscene="DEN ANDEN SCENE"
            cardkategori="POP"
            carddato="23. juli"
            cardtidspunkt="12:00"
        />
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="uma kabongo"
            cardtitle="UMA KABONGO"
            cardscene="DEN ENE SCENE"
            cardkategori="RAP"
            carddato="23. juli"
            cardtidspunkt="14:00"
        />
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="adlyd"
            cardtitle="ADLYD"
            cardscene="DEN ANDEN SCENE"
            cardkategori="PUNK"
            carddato="23. juli"
            cardtidspunkt="16:00"
        />
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="adam"
            cardtitle="ADAM"
            cardscene="DEN ENE SCENE"
            cardkategori="RAP"
            carddato="23. juli"
            cardtidspunkt="18:00"
        />
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="yasmin"
            cardtitle="YASMIN"
            cardscene="DEN ANDEN SCENE"
            cardkategori="INDIE"
            carddato="23. juli"
            cardtidspunkt="21:00"
        />
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="induktri"
            cardtitle="INDUKTRI"
            cardscene="DEN ENE SCENE"
            cardkategori="ROCK"
            carddato="23. juli"
            cardtidspunkt="00:00"
        />
        <Kunstnercard
            cardimage="josie.png"
            cardimagealt="tanjah"
            cardtitle="TANAJAH"
            cardscene="DEN ANDEN SCENE"
            cardkategori="PSYCH"
            carddato="23. juli"
            cardtidspunkt="01:00"
        />
    </div>

    <div
        class="flex flex-col items-center gap-6 lg:flex-row lg:justify-center lg:gap-13 mb-10"
    >
        <button
            class="filter-btn text-darkblue border-2 border-darkblue transition bg-darkyellow rounded-xl cursor-pointer px-12 p-4"
            data-dato="23 juli"
        >
            d. 23 juli
        </button>
        <button
            class="filter-btn text-darkblue border-2 border-darkblue transition bg-beige rounded-xl cursor-pointer px-12 p-4"
            data-dato="24 juli"
        >
            d. 24 juli
        </button>
        <button
            class="filter-btn text-darkblue border-2 border-darkblue transition bg-beige rounded-xl cursor-pointer px-12 p-4"
            data-dato="25 juli"
        >
            d. 25 juli
        </button>
        <button
            class="filter-btn text-darkblue border-2 border-darkblue transition bg-beige rounded-xl cursor-pointer px-12 p-4"
            data-dato="26 juli"
        >
            d. 26 juli
        </button>
    </div>

    <div id="skema"></div>

    <script type="module">
        const skemaer = {
            "23 juli": {
                10: { scene1: "JOSIE AMADONNA" },
                12: { scene2: "BECCA" },
                14: { scene1: "UMA KABONGO" },
                16: { scene2: "ADLYD" },
                18: { scene1: "ADAM" },
                21: { scene2: "YASMIN" },
                "00": { scene1: "INDUKTRI" },
                "01": { scene2: "TANAJAH" },
            },
            "24 juli": {
                10: { scene2: "ADLYD" },
                12: { scene2: "YASMIN" },
                14: { scene1: "JOSIE AMADONNA" },
                16: { scene2: "BECCA" },
                18: { scene2: "TANAJAH" },
                21: { scene1: "ADAM" },
                "00": { scene1: "UMA KABONGO" },
                "01": { scene1: "INDUKTRI" },
            },
            "25 juli": {
                10: { scene1: "ADAM" },
                12: { scene2: "TANAJAH" },
                14: { scene1: "INDUKTRI" },
                16: { scene2: "BECCA" },
                18: { scene1: "UMA KABONGO" },
                21: { scene1: "JOSIE AMADONNA" },
                "00": { scene2: "ADLYD" },
                "01": { scene2: "YASMIN" },
            },
            "26 juli": {
                10: { scene1: "BECCA" },
                12: { scene2: "ADLYD" },
            },
        };

        const tider = ["10", "12", "14", "16", "18", "21", "00", "01"];

        const skemaContainer = document.getElementById("skema");
        const buttons = document.querySelectorAll(".filter-btn");

        function renderSkema(dato) {
            const data = skemaer[dato] || {};
            let html = `
            <div class="overflow-hidden border-2 border-darkblue rounded-lg"> 
        <table class="w-full border border-darkblue text-sm sm:text-base">
          <thead class="bg-darkyellow text-left text-darkblue">
            <tr>
              <th class="p-1 sm:p-2 w-1/6 border border-darkblue">Kl.</th>
              <th class="p-1 sm:p-2 w-1/2 border border-darkblue">DEN ENE SCENE</th>
              <th class="p-1 sm:p-2 w-1/2 border border-darkblue">DEN ANDEN SCENE</th>
            </tr>
          </thead>
          <tbody>
            </div>
      `;

            tider.forEach((tid) => {
                html += `
          <tr>
            <td class="border p-1 sm:p-2 text-darkblue border-darkblue">${tid}</td>
            <td class="border p-1 sm:p-2 text-darkblue border-darkblue">${data[tid]?.scene1 || ""}</td>
            <td class="border p-1 sm:p-2 text-darkblue border-darkblue">${data[tid]?.scene2 || ""}</td>
          </tr>
        `;
            });

            html += "</tbody></table>";
            skemaContainer.innerHTML = html;
        }

        // Init med fÃ¸rste dato
        renderSkema("23 juli");

        buttons.forEach((btn) => {
            btn.addEventListener("click", () => {
                buttons.forEach((b) => b.classList.remove("bg-darkyellow"));
                buttons.forEach((b) => b.classList.add("bg-beige"));
                btn.classList.remove("bg-beige");
                btn.classList.add("bg-darkyellow");

                renderSkema(btn.dataset.dato);
            });
        });
    </script>
</MainLayout>
