---
import MainLayout from "../layouts/MainLayout.astro";
import Arrow from "../components/Arrow.astro";
import Link from "../components/Link.astro";
import { Image } from "astro:assets";
import Banner from "../components/Banner.astro";
import Hero from "../components/Hero.astro";

import Timebanner from "../components/Timebanner.astro";
import Galleri from "../components/Galleri.astro";
import Kunstnercard from "../components/Kunstnercard.astro";
import Heading from "../components/Heading.astro";
---

<MainLayout title="Nakkefestival">
  <section>
    <div class="-mx-10 md:-mx-30 mb-20">
      <Hero herotitel="NAKKEFESTIVAL" />
    </div>

    <!-- Første sektion med logo -->

    <section class="flex flex-col lg:flex-row items-center gap-8 mb-15">
      <div class="max-w-xl">
        <Heading htmlheading="h2" size="large" stylingclasses="text-orange">Musik kunst og kærlighed</Heading>
        <p>
          Kom og få det bedste ud af sommeren, når vi sammen drømmer os væk i den fantastiske stemning på Nakkefestival – en oplevelse, du ikke finder andre steder! Programmet bliver spækket med
          lækkerier, og vi glæder os til at danse og feste med dig og dine venner til den lyse morgen. Så tag teltet og vennerne under armen, og oplev Danmarks hyggeligste festival.
        </p>
      </div>

      <div class="flex-shrink-0">
        <img src="/logo.svg" alt="Logo" class="w-64 h-auto lg:w-96 animate__animated animate__tada solsikkeguitar" />
      </div>
    </section>

    <!-- Årets kunster sektion -->
    <section class="mb-15">
      <div class="text-center">
        <Heading htmlheading="h3" size="medium">Årets kunstnere</Heading>
      </div>

      <div class="flex flex-col gap-20 p-4 kunstnercards overflow-hidden">
        <Kunstnercard
          x-show="kunstneraktiv === 'kunstnerdag1'"
          cardimage="josie.webp"
          cardimagealt="Josie Amadonna"
          cardtitle="JOSIE AMADONNA"
          cardscene="DEN ENE SCENE"
          cardkategori="RAP"
          carddato="23. juli"
          cardtidspunkt="10:00"
        />
        <Kunstnercard
          x-show="kunstneraktiv === 'kunstnerdag1'"
          cardimage="becca.webp"
          cardimagealt="becca"
          cardtitle="BECCA"
          cardscene="DEN ANDEN SCENE"
          cardkategori="POP"
          carddato="23. juli"
          cardtidspunkt="12:00"
        />
        <Kunstnercard
          x-show="kunstneraktiv === 'kunstnerdag1'"
          cardimage="uma.webp"
          cardimagealt="uma kabongo"
          cardtitle="UMA KABONGO"
          cardscene="DEN ENE SCENE"
          cardkategori="RAP"
          carddato="23. juli"
          cardtidspunkt="14:00"
        />
      </div>
      <div class="flex items-center justify-center m-4">
        <Link href="/kunstnere" variant="secondary">Se hele programmet</Link>
      </div>
    </section>

    <!-- Nedtæller sektion -->
    <section class="mb-50">
      <div class="text-center">
        <Heading htmlheading="h3" size="medium">Nakkefestival starter om:</Heading>
      </div>
      <Timebanner />
    </section>
    <!-- Fællesbus sektion -->
    <section class="flex flex-col lg:flex-row gap-6 mb-30">
      <!-- Første boks -->
      <div class="border-2 border-darkblue bg-pink p-5 rounded-lg lg:w-1/2 overflow-hidden">
        <Heading htmlheading="h3" size="medium" stylingclasses="mb-4">Tag fællesbus til Nakke</Heading>

        <p class="mb-6">
          Turen tager omkring en time og koster 170 kroner (Kbh) det er billigere end offentlig transport og bedre for miljøet end at køre selv. Det er oven i købet en fantastisk undskyldning for at
          tilbringe endnu mere tid sammen med dine søde og dejlige Nakkevenner!
        </p>
        <p>Busserne til festivalen kører fra DGI byen. Du skal være ved bussen en halv time før afgang, så vi får alle tjekket ind og din bagage med.</p>
        <Link href="/købbusbillet" variant="secondary">Tilmeld dig bussen</Link>
      </div>

      <!-- Anden boks -->
      <div class="lg:w-1/2 overflow-hidden">
        <img src="bus.svg" alt="Bus" class="w-full h-auto scale-150 bus" />
        <p class="p-2">
          Fællesbussen til Nakke er den hyggeligste og grønneste måde at få dig og dine venner med på Nakkefestival! I samarbejde med Solibus arrangerer vi bustransport til og fra festivalen. Der er
          begrænsede pladser, så skynd dig at få fat i en billet!
        </p>
      </div>
    </section>

    <!-- banner sektion -->
    <section class="mb-15">
      <Banner />
    </section>
    <!-- SoMe sektion -->
    <section class="mb-15">
      <div class="text-center">
        <Heading htmlheading="h3" size="medium">Se mere til Nakke</Heading>
      </div>
    </section>
    <!-- Galleri start -->
    <section class="mb-15">
      <Galleri />
    </section>
  </section>
  <Arrow />
</MainLayout>
<style>
  .solsikkeguitar:hover {
    animation: animate__tada;
    animation-duration: 2s;
  }
</style>
<script>
  /* Import af Motion One bibliotek */
  import { animate, inView } from "motion";
  inView(".bus", () => {
    animate(".bus", { x: [2000, 0] }, { duration: 2 });
  });

  inView(".kunstnercards", () => {
    animate(".kunstnercards", { x: [-2000, 0] }, { duration: 2 });
  });

  class Login extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({
        mode: "open",
      }); //apparently slots only work with the shadow dom?
    }
    connectedCallback() {
      this.html = `<style>
      /****** LOGIN MODAL ******/
      #login-modal {
          background:black;
          position:fixed;
          width:100vw;
          height:100vh;
      }
      .loginmodal-container {
        padding: 30px;
        max-width: 350px;
        width: 100% !important;
        background-color: #F7F7F7;
        margin: 0 auto;
        border-radius: 2px;
        box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
        overflow: hidden;
        font-family: -apple-system,system-ui,BlinkMacSystemFont,"Segoe UI","Roboto","Helvetica Neue", Arial, sans-serif;
      }
      .loginmodal-container h1 {
        text-align: center;
        font-size: 1.8em;
      }
      .loginmodal-container input[type=submit] {
        width: 100%;
        display: block;
        margin-bottom: 10px;
        position: relative;
      }
      input[type=password] {
        height: 44px;
        font-size: 16px;
        width: 100%;
        margin-bottom: 10px;
        -webkit-appearance: none;
        background: #fff;
        border: 1px solid #d9d9d9;
        border-top: 1px solid #c0c0c0;
        padding: 0 8px;
        box-sizing: border-box;
      }
      input[type=password]:hover {
        border: 1px solid #b9b9b9;
        border-top: 1px solid #a0a0a0;
        box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
      }
      .loginmodal {
        text-align: center;
        font-size: 14px;
        font-weight: 700;
        height: 36px;
        padding: 0 8px;
      }
      .loginmodal-submit {
        border: 0px;
        color: #fff;
        text-shadow: 0 1px rgba(0,0,0,0.1); 
        background-color: #4d90fe;
        padding: 17px 0px;
        font-size: 14px;
      }
      .loginmodal-submit:hover {
        border: 0px;
        text-shadow: 0 1px rgba(0,0,0,0.3);
        background-color: #357ae8;
      }
    </style>
    <div class="modal fade" id="login-modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="loginmodal-container">
          <h1>Login</h1><br>
          <p>This is a school project</p>
          <p>The password is <code>kea</code></p>
          <form>
            <input type="password" name="pass" placeholder="Password">
            <input type="submit" name="login" class="login loginmodal-submit" value="Login">
          </form>
        </div>
      </div>
    </div>`;
      this.render();

      this.shadowRoot.querySelector("form").addEventListener("submit", (e) => {
        e.preventDefault();
        if (this.shadowRoot.querySelector("input[name=pass]").value === "kea") {
          document.querySelector("#totally-delete-me").remove();
          localStorage.setItem("iform-totally-logged-in", true);
        }
      });
    }
    render() {
      this.shadowRoot.innerHTML = this.html;
    }
  }
  customElements.define("iform-login", Login);
  window.addEventListener("load", () => {
    if (!localStorage.getItem("iform-totally-logged-in")) {
      const div = document.createElement("div");
      div.id = "totally-delete-me";
      div.style.width = "100vw";
      div.style.height = "100vh";
      div.style.position = "fixed";
      div.style.zIndex = "9999";

      div.innerHTML = "<iform-login />";
      document.body.prepend(div);
    }
  });
</script>
